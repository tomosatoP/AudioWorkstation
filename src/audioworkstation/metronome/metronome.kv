#:kivy 2.0.0
#:set default_font_size sp(30)

BeatSelectButton@ToggleButton:
    group: 'BeatSelectButtons'
    font_size: default_font_size
    halign: 'center'
    allow_no_selection: False

<BpsChangeButton@Button>:
    font_size: default_font_size
    on_press: parent.bps += int(self.text)

<MetronomeView>:
    bps_layout: bps_boxlayout
    beat_layout: beat_boxlayout

    size: root.size
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: default_font_size * 1.5
            ToggleButton:
                size_hint_x: 0.2
                font_size: default_font_size
                text: '▶'
                on_press: root.sound(self.state)
            BoxLayout:
                id: bps_boxlayout
                orientation: "horizontal"
                size_hint_x: 0.8
                Label:
                    size_hint_x: 0.2
                    font_size: default_font_size
                    text: 'BPS'
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_x: 0.6
                    BpsChangeButton:
                        size_hint_x: 0.1
                        text: '-10'
                    BpsChangeButton:
                        size_hint_x: 0.1
                        text: '-1'
                    Label:
                        size_hint_x: 0.2
                        font_size: default_font_size
                        text: str(root.bps)
                    BpsChangeButton:
                        size_hint_x: 0.1
                        text: '+1'
                    BpsChangeButton:
                        size_hint_x: 0.1
                        text: '+10'
        BoxLayout:
            id: beat_boxlayout
            orientation: "vertical"
            BoxLayout:
                orientation: 'horizontal'
                Label:
                    size_hint_x: 0.2
                    font_size: default_font_size
                    text: '単純 \n 拍子'
                BoxLayout:
                    orientation: 'horizontal'
                    BeatSelectButton:
                        text: '2\n2'
                    BeatSelectButton:
                        text: '3\n2'
                    BeatSelectButton:
                        text: '2\n4'
                    BeatSelectButton:
                        text: '3\n4'
                    BeatSelectButton:
                        text: '4\n4'
                        state: 'down'
                    BeatSelectButton:
                        text: '3\n8'
            BoxLayout:
                orientation: 'horizontal'
                Label:
                    size_hint_x: 0.2
                    font_size: default_font_size
                    text: '複合 \n 拍子'
                BoxLayout:
                    orientation: 'horizontal'
                    BeatSelectButton:
                        text: '2+2\n4'
                    BeatSelectButton:
                        text: '3+3\n4'
                    BeatSelectButton:
                        text: '2+2+2\n4'
                    BeatSelectButton:
                        text: '3+3\n8'
                    BeatSelectButton:
                        text: '2+2+2\n8'
