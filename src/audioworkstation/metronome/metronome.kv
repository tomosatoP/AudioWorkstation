#:kivy 2.0.0
#:set default_font_size sp(30)

<BeatSelectButton@ToggleButton>:
    group: 'BeatSelectButtons'
    font_size: default_font_size
    halign: 'center'
    on_press: self.state = 'down' if self.state == 'down' else 'down'

<BpsChangeButton@Button>:
    size_hint_x: 0.4
    font_size: default_font_size
    on_press: app.root.bps += int(self.text)

<MetronomeView>:
    bps_layout: bps_boxlayout
    size: root.size

    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: default_font_size * 1.5
            ToggleButton:
                size_hint_x: 0.3
                font_size: default_font_size
                text: '▶'
                on_press: root.sound_on() if self.state == 'down' else root.sound_off()
            Label:
                font_size: default_font_size
                size_hint_x: 0.2
                text: 'BPS'
            BoxLayout:
                id: bps_boxlayout
                orientation: 'horizontal'
                size_hint_x: 0.7
                BpsChangeButton:
                    text: '-10'
                BpsChangeButton:
                    text: '-1'
                Label:
                    size_hint_x: 0.8
                    font_size: default_font_size
                    text: str(root.bps)
                BpsChangeButton:
                    text: '+1'
                BpsChangeButton:
                    text: '+10'
        BoxLayout:
            orientation: 'horizontal'
            Label:
                font_size: default_font_size
                size_hint_x: 0.2
                text: '単純 \n 拍子'
            BoxLayout:
                orientation: 'horizontal'
                BeatSelectButton:
                    text: '2\n2'
                BeatSelectButton:
                    text: '3\n2'
                BeatSelectButton:
                    text: '2\n4'
                BeatSelectButton:
                    text: '3\n4'
                BeatSelectButton:
                    text: '4\n4'
                    state: 'down'
                BeatSelectButton:
                    text: '3\n8'
        BoxLayout:
            orientation: 'horizontal'
            Label:
                font_size: default_font_size
                size_hint_x: 0.2
                text: '複合 \n 拍子'
            BoxLayout:
                orientation: 'horizontal'
                BeatSelectButton:
                    text: '2+2\n4'
                BeatSelectButton:
                    text: '3+3\n4'
                BeatSelectButton:
                    text: '2+2+2\n4'
                BeatSelectButton:
                    text: '3+3\n8'
                BeatSelectButton:
                    text: '2+2+2\n8'
