#:kivy 2.0.0

<MidiTitleButton>:
    group: 'MidiTitleButtons'
    font_size: 25
    size_hint_y: None
    text_size: self.size
    valign: 'center'
    halign: 'center'
    shorten: True
    shorten_from: 'center'
    height: 40
    on_press: self.state = 'down' if self.state == 'down' else 'down'

<PlayerView>:
    play_button: play_togglebotton
    pause_button: pause_togglebutton
    ticks_slider: ticks
    midifiles: boxlayout_play_list
    channels: gridlayout_rules

    BoxLayout:
        size: root.size
        orientation: 'vertical'
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.2
            Label:
                size_hint_x: 0.15
                font_size: 40
                text: '伴奏'
            ToggleButton:
                id: play_togglebotton
                border: (0, 0 , 0 ,0)
                disabled: True
                size_hint_x: 0.1
                font_size: 40
                state: 'normal'
                text: '▶'
                on_press: root.sound(self.state)
            ToggleButton:
                id: pause_togglebutton
                size_hint_x: 0.1
                font_size: 40
                state: 'normal'
                disabled: True
                text: '||'
                on_press: root.pause(self.state)
            BoxLayout:
                orientation: 'horizontal'
                size_hint_x: 0.65
                Slider:
                    id: ticks
                    size_hint_x: 0.8
                    disabled: False
                    min: 0
                    max: 0
                    step: 1
                    value: 0
                Label:
                    halign: 'right'
                    size_hint_x: 0.2
                    text: str(int(ticks.value)) + '\n' + 'Max: ' + str(int(ticks.max))
        BoxLayout:
            orientation: 'horizontal'
            ScrollView:
                size_hint_x: 0.55
                do_scroll_x: False
                do_scroll_y: True
                bar_width: 30
                BoxLayout:
                    id: boxlayout_play_list
                    orientation: 'vertical'
                    height: self.minimum_height
                    size_hint_y: None
            GridLayout:
                id: gridlayout_rules
                size_hint_x: 0.45
                cols: 2
                rows: 8
